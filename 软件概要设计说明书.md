# 软件概要设计说明书

>1. 《软件概要设计说明书》(SDD)概要设计说明书又可称系统设计说明书，这里所说的系统是指程序系统。编制的目的是说明对程序 系统的设计考虑，包括程序系统的基本处理流程、程序系统的组织结构、模块划分、功能分配、接口设计、运行设计、安全设计、数据结构设计和出错处理设计等，为程序的详细设计提供基础。
>2. 本课程及本实验不涉及、不强调、不关注的部分可省略，但不允许删除已有条目。
>3. 最终文档请删除所有灰色字体和斜体等说明部分。

[Toc]

## 1 引言

### 1.1 编写目的

> 软件概要设计说明书（SDD）的编写目的是为了提供系统设计的高层次视图，详细说明程序系统的设计考虑和基本架构。其主要目的包括：
>
> 1. **系统设计的概述和背景**：介绍系统的总体情况，包括项目的背景、目标、范围和所涉及的技术等信息，让读者了解系统的背景和整体概况。
>
> 2. **程序系统的基本处理流程**：描述程序系统的主要功能和基本处理流程，以及各个模块之间的交互关系，使读者能够了解系统的核心功能和流程。
>
> 3. **程序系统的组织结构和模块划分**：说明系统的整体结构和模块划分，包括各个模块的功能、职责和关系，帮助读者理解系统的组织结构和模块划分。
>
> 4. **功能分配和接口设计**：详细描述各个模块之间的功能分配和接口设计，包括模块之间的数据交换和通信方式，确保各个模块能够有效地协同工作。
>
> 5. **运行设计和安全设计**：说明系统的运行环境和运行机制，以及系统的安全设计考虑，包括对数据的保护和系统的稳定性等方面，确保系统能够安全可靠地运行。
>
> 6. **数据结构设计和出错处理设计**：介绍系统所涉及的主要数据结构和数据流，以及系统的出错处理机制和容错设计，保证系统在面对异常情况时能够正确处理和恢复。
>

> 预期的读者包括项目的开发团队成员、系统架构师、技术经理、项目管理人员以及其他与系统设计和开发相关的人员。这些读者需要通过软件概要设计说明书了解系统的总体设计方案和设计思路，以便为后续的详细设计和开发工作提供指导和支持。



### 1.2 背景

> 1. 待开发软件系统的名称：BiliMili视频网站

> 1. 项目的任务提出者、开发者、用户以及将运行该软件的计算站（中心）：
>    - 任务提出者：任务提出者为“2024软件工程基础课程组”。这个课程组负责规划、设计和组织软件工程基础课程的教学内容和实践项目。通过这个大作业项目，他们旨在让学生深入理解软件工程的基本概念和方法，掌握软件开发的流程和技能。
>    - 开发者：开发团队为“第13开发小组”，由五个学生组成。这个小组的成员是课程中的学生，他们共同参与了项目的开发工作。每个成员都有自己的责任和任务，包括需求分析、系统设计、编码实现、测试调试等方面的工作。
>    - 用户：包括视频上传者、观看者、评论者等。他们是项目的主要使用对象，对系统的功能和性能有直接的需求和反馈。用户的满意度和体验质量直接影响着软件系统的使用和推广。因此，他们的需求和反馈是开发团队必须要考虑的重要因素。
>    - 计算站（中心）：指部署和运行该软件系统的计算资源中心，是云服务器、数据中心或企业内部的服务器集群。在这个项目中，计算站负责提供系统的运行环境和计算资源支持，包括服务器硬件设备、网络带宽、数据存储等。计算站的稳定性和性能对系统的运行效果有重要影响，因此，确保计算站的可靠性和安全性是项目开发过程中需要重点考虑的问题。



### 1.3 定义

| 专门术语             | 定义                                                         | 外文首字母组词                    |
| -------------------- | ------------------------------------------------------------ | --------------------------------- |
| 前端开发             | 负责实现用户界面和交互逻辑的软件开发过程                     | Frontend Development              |
| 后端开发             | 负责实现服务器端应用程序和数据库交互逻辑的软件开发过程       | Backend Development               |
| 配置文件             | 存储应用程序的配置信息，如数据库连接信息、服务端口等         | Configuration File                |
| 前端框架             | 提供了一套结构、组件和工具，用于快速构建用户界面             | Frontend Framework                |
| Vue                  | 一种流行的JavaScript框架，用于构建用户界面的应用程序         | Vue                               |
| React                | 一种用于构建用户界面的JavaScript库                           | React                             |
| Angular              | 一种用于构建Web应用程序的JavaScript框架                      | Angular                           |
| API                  | 应用程序编程接口，用于不同组件或系统之间的通信               | Application Programming Interface |
| 数据库模型           | 描述数据库结构的方式，包括表、字段和关系等                   | Database Model                    |
| 前端路由             | 管理前端应用程序中URL地址和视图之间的映射关系                | Frontend Routing                  |
| 后端路由             | 管理后端应用程序中URL地址和处理器之间的映射关系              | Backend Routing                   |
| 中间件               | 在请求到达目的地之前或之后执行的代码或组件                   | Middleware                        |
| 跨域资源共享(CORS)   | 一种机制，允许在不同源之间共享资源                           | Cross-Origin Resource Sharing     |
| 软件需求分析         | 对软件系统需求进行收集、分析、整理和确认的过程               | Software Requirements Analysis    |
| 系统架构设计         | 定义软件系统的整体结构、模块划分、组件之间的关系以及系统的运行时行为 | System Architecture Design        |
| 模块划分             | 将系统划分为若干相互独立、功能清晰的模块                     | Module Partitioning               |
| 功能分配             | 将各个模块的功能分配给相应的开发人员或团队                   | Function Allocation               |
| 接口设计             | 定义模块之间的接口规范，确保模块之间的互操作性               | Interface Design                  |
| 运行设计             | 设计系统的运行时行为、并发控制、性能优化等方面               | Runtime Design                    |
| 安全设计             | 设计系统的安全机制，包括身份验证、访问控制、数据加密等       | Security Design                   |
| 数据结构设计         | 设计系统中的数据结构，包括数据库设计、数据存储结构设计等     | Data Structure Design             |
| 出错处理设计         | 设计系统的异常处理机制，确保系统在发生错误时能够及时恢复并保证数据的完整性 | Error Handling Design             |
| 数据库迁移           | 在开发过程中管理数据库结构变化的过程                         | Database Migration                |
| ORM（对象关系映射）  | 将对象模型与数据库模型进行映射的技术                         | Object-Relational Mapping         |
| RESTful API          | 遵循REST原则设计的API，使用HTTP协议进行通信                  | Representational State Transfer   |
| JSON                 | 一种数据格式，用于在客户端和服务器之间传输数据               | JavaScript Object Notation        |
| CRUD                 | 基本的数据库操作，包括创建(Create)、读取(Read)、更新(Update)和删除(Delete) | Create, Read, Update, Delete      |
| 会话管理             | 管理用户会话状态的过程，包括认证、授权和会话存储             | Session Management                |
| 单页应用(SPA)        | 一种Web应用程序架构，通过Ajax加载页面内容，不需要页面重新加载 | Single Page Application           |
| 服务器端渲染(SSR)    | 在服务器端生成HTML页面并将其发送到客户端的过程               | Server-Side Rendering             |
| 客户端渲染(CSR)      | 在客户端使用JavaScript动态生成HTML页面的过程                 | Client-Side Rendering             |
| Web套接字(WebSocket) | 一种在单个TCP连接上进行全双工通信的协议                      | WebSocket                         |
| 静态资源             | 在Web应用程序中不会被修改的文件，如HTML、CSS、JavaScript等   | Static Resources                  |

### 1.4参考设计

> 《软件需求规格说明书》
>
> 《软件概要设计说明书》
>
> 《测试报告》
>
> 《GB_T 8567-2006 计算机软件文档 编制规范》
>
> 《GB∕T+32424-2015+系统与软件工程+用户文档的设计者和开发者要求.pdf》
>
> 《GBT+9385- 2008+计算机软件需求规格说明规范》
>
> 《GB∕T+16680-2015+系统与软件工程+用户文档的管理者要求》

## 2 系统需求概述

### 2.1需求规定

> 本系统旨在为用户提供一个安全、高效、易于使用的视频分享平台。系统将处理以下主要的输入输出项目，并满足相应的功能性能要求：
>
> **主要输入项目**：
>
> - **视频文件**：用户上传的原始视频文件，支持多种格式（如MP4、AVI等）。
> - **个人信息**：用户注册和个人资料编辑时提供的信息，包括但不限于头像、用户名、电子邮件、个人简介、隐私设置等内容。
> - **互动内容**：用户在视频下的评论、点赞、收藏以及分享等互动数据。
>
> **主要输出项目**：
>
> - **视频播放**：经过转码处理的视频流，适应不同的播放设备和网络环境。
> - **用户通知**：包括新视频发布、专栏更新、用户互动等相关通知。
> - **创作周报**：定期生成的用户个人创作活动报告，包括观看量、互动数据等统计信息。
>
> **功能性能要求**：
>
> - **视频上传与转码**：
>   - 支持快速上传，服务器端自动进行视频质量检测和格式转换。
>   - 转码服务需保证高可用性和低延迟，以满足用户对即时播放的需求。
> - **视频推荐与检索**：
>   - 实现基于内容和用户行为的智能推荐系统，提高视频曝光率和用户满意度。
>   - 提供高效的视频搜索功能，支持关键词和分类筛选，以便用户快速找到感兴趣的内容。
> - **用户互动与社区建设**：
>   - 提供实时的评论、私信和弹幕系统，支持文本、表情和图片等多种形式的互动。
>   - 实现用户订阅机制和消息提醒功能，增强用户之间的连接和社区的活跃度。
> - **性能与可靠性**：
>   - 系统需保证99.9%的在线时间，处理请求的响应时间不超过2秒。
>   - 实施定期的数据备份和灾难恢复计划，确保数据的安全性和完整性。

### 2.2业务目标

> 本系统的业务目标是创建一个具有竞争力的视频分享平台，不仅满足基本的视频上传和播放需求，还提供高级的社交互动功能。在确保成本效益的同时，追求优质的用户体验和社区活跃度。具体业务目标包括：
>
> - **提供丰富的视频内容**：吸引和鼓励用户上传高质量的视频内容，建立多样化的视频库，满足不同用户的需求。
> - **优化用户体验**：通过简洁直观的界面设计、快速响应的系统性能和个性化的内容推荐，提升用户满意度。
> - **增强社区互动**：设立评论区、点赞和分享功能，以及用户之间的关注机制，促进用户间的互动和讨论。
> - **严格审核管理机制**：对于用户投稿的视频和专栏有审核、举报机制，设置管理员，确保视频平台清朗的网络环境。
> - **保障数据安全和用户隐私**：实施数据加密和数据库安全措施，确保用户信息的安全。
> - **支持创作者发展**：提供创作周报等创作者统计分析工具，帮助他们了解观众行为，优化内容创作。
> - **持续技术创新**：定期更新系统，引入新技术和功能，保持平台的竞争力。

### 2.3运行环境

#### 2.3.1设备 

> - **服务器**：可以使用云服务提供的虚拟服务器，确保有足够的处理能力和存储空间来支持网站运行。
> - **个人电脑**：开发者和测试人员需要配置有现代处理器和至少8GB RAM的个人电脑，以便进行软件开发和测试。
> - **网络连接**：确保有稳定的网络连接，以支持视频数据的上传和下载。

#### 2.3.2支持软件

> - **操作系统**：服务器端可以使用免费的Linux发行版，如Ubuntu，学生和教师的个人电脑则可以是任何常见的操作系统，如Windows或macOS。
> - **数据库**：可以使用开源的MySQL 8.0以上版本作为后端数据库。
> - **开发工具**：推荐使用免费的集成开发环境（IDE），如Visual Studio Code等。
> - **测试工具**：可以使用JUnit或其他免费的测试框架进行单元测试。
> - **版本控制**：使用Git进行版本控制，可以利用GitHub或Gitee等平台进行代码的托管和协作。



### 2.4设计约束

1. **硬件限制：**软件所需处理器为英特尔i5系列64位处理器及以上级别，内存1GB以上，存储空间1GB以上
2. **软件环境：**软件适用于Windows环境，能够正常连接互联网即可
3. **编程语言：**开发时后端使用Java+Springboot-Mybatis框架，前端使用vue+html框架
4. **性能约束：**对于正常的网络服务，平均响应时间在1秒左右，加载时间尽量不要超过5秒，需要选择合适的算法
5. **通信协议和标准：**遵守GB/T38618-2020标准

### 2.5 功能需求

#### 基本设计概念：

视频网站的基本设计概念是提供一个平台，让用户能够上传、浏览和分享视频内容。这个平台应该支持高清视频流的快速传输，同时保证内容的多样性和可访问性。用户界面应简洁直观，确保用户能够轻松地找到他们感兴趣的视频。

#### 处理流程：

1. **用户注册与登录**：用户通过邮箱或手机号注册账户，并通过验证登录。
2. **视频上传**：用户选择视频文件上传至服务器，填写视频标题、描述等信息，并选择合适的分类标签。
3. **视频处理**：服务器对上传的视频进行编码、格式转换和质量压缩，以适应不同的播放需求。
4. **内容审核**：上传的视频内容需要经过自动化审核或人工审核，确保内容符合平台规定。
5. **视频存储**：视频文件存储在分布式文件系统中，确保数据的安全性和可靠性。
6. **视频播放**：用户可以通过搜索或浏览找到感兴趣的视频，并进行在线播放。播放器支持各种操作，如暂停、快进、调整音量等。
7. **互动功能**：用户可以对视频进行点赞、评论和分享，与其他用户互动。
8. **推荐算法**：系统根据用户的观看历史和偏好，推荐相关视频内容。
9. **后台管理**：管理员可以对用户和视频内容进行管理，包括数据统计、用户反馈处理等。

### 2.6非功能需求

- **易用性需求**：
    - 用户应能在短时间内学会使用系统完成基本任务。
    - 系统界面应直观易懂，用户能快速识别出产品功能。
- **可靠性需求**：
    - 系统应具有输入提示和数据检查功能，防止数据异常。
    - 系统应能处理各种异常情况，如人为操作错误、输入非法数据等。
    - 系统的故障率应低于特定标准。
- **可维护性需求**：
    - 系统应易于维护和升级。
    - BUG修复应在规定时间内完成。

### 2.7系统总体架构

![](./diagram.jpg)
将搜索，视频服务，发送评论，消息服务等结合在一起


## 3 系统接口设计

### 3.2接口设计

#### 3.2.1用户接口

> * **视频上传接口**：用户通过该接口上传视频，上传成功后系统向用户发送提示信息”视频上传成功“，并在用户主页展示上传成功的视频。
> * **个人信息修改接口**：用户在个人信息页面点击”修改个人信息“按钮，通过该接口修改个人信息，修改完成并保存后系统向用户发送提示信息”个人信息保存成功“，并在个人信息页面展示修改后的个人信息。
> * **视频互动接口**：用户在（自己或他人）发布的视频讨论区通过此接口进行点赞、收藏、分享和评论等互动操作，互动成功后系统向用户发送提示信息”点赞/收藏/分享/评论成功“，并展示用户互动的结果（若为点赞或收藏则以图标高亮展示，若为评论则在评论区展示评论）。

#### 3.2.2 与其他软件、硬件接口

> * **与数据库的接口**：平台的用户信息与视频信息储存在数据库中，在需要访问某一用户或视频的信息时，从数据库获取相应数据并保存至系统相应的数据结构中。
> * **分享时与其他软件的接口**：用户在点击分享按钮后选择分享到的软件，以微信为例：选择分享到微信后，系统将视频页面发送到微信，用户跳转至微信页面，选择分享到哪一个聊天。

### 3.3 系统数据结构设计

#### 3.3.1 逻辑结构设计要点

> * **用户数据结构**：包含单个用户的ID、名称以及其他个人信息，其中用户的ID为唯一标识符，每个人的ID都是不与他人重复的，系统以ID分辨用户实体，ID在用户注册时自动生成；个人信息均为private属性，当用户要查看个人信息时，首先检查用户权限，在权限匹配后使用每项个人信息配套的`getter()`函数进行展示；在用户想要修改个人信息时使用每项个人信息配套的`setter()`函数进行修改。
> * **视频数据结构**：包含单个视频的标题、ID、视频文件、点赞数据等信息，其中视频的ID为唯一标识符，每个视频的ID都是不与其他视频重复的，系统以ID分辨视频实体，ID在视频上传成功时自动生成；当用户要修改视频信息时，首先检查用户权限，在权限匹配后使用视频每项信息配套的`setter()`函数进行修改。

#### 3.3.2 物理结构设计要点

> * **用户数据结构的保存**：平台在某一时刻会有若干用户在线，对于这些在线的用户，应将这些用户的数据结构储存在一个数组里，并根据用户ID大小的逻辑顺序决定用户数据结构在数组中的物理顺序：因为对某一用户的添加或删除（注销）为比较少见的事件，而对用户信息的访问则要常见的多，而这恰恰与数组存储形式的优势相符合。以这样的形式保存可以快速访问到发出查看或修改请求的用户对应的数据结构，从而大大提高查询效率和速度。值得注意的是，如果用数组保存在线用户的数据结构，数组的大小就决定了最大在线人数，如果数组太小就会对同时在线人数做出很大的限制，而数组过大又会导致大片内存的使用，因此选择一个合理的数组大小是一个很重要的问题。
> * **视频中评论数据结构的保存**：对于视频中的评论，可以以链表的形式保存：与用户的添加或删除相比，视频评论的增加或删除是非常常见的事件，此外评论的展示也是逐条展示的，并没有访问某条特定评论的场合；根据评论的这些特性，用链表保存评论可以避免对大块内存空间的使用，提高内存利用率。

#### 3.3.3数据结构与程序关系



## 4 系统数据库设计
- 评论等留言模块
>message_feedback

| 字段名称 | 类型 | 长度 | Nullable | primarykey |
|---       |---  |---   |---       |---         |
| message_id | int | 11 | false | true |
|message_title|varchar|64|true|false|
|m_user_id|int|11|false|false|
|message_date|date|N/A|true|false|
|message_content|text|N/A|false|false|
|message_time|datetime|N/A|false|false|

- 通知模块
>notice

| 字段名称 | 类型 | 长度 | Nullable | primarykey |
|---       |---  |---   |---       |---         |
|notice_id|mediumint|8|false|true|
|title|varchar|125|false|false|
|priority|int|1|false|false|
|notice_content|text|N/A|false|false|
|notice_time|datetime|N/A|false|false|

- 用户模块
>ordinary_user

| 字段名称 | 类型 | 长度 | Nullable | primarykey |
|---       |---  |---   |---       |---         |
| user_id |int|11|false|true|
|user_name|varchar|64|true|false|
|user_gender|enum|N/A|true|false|
|user_level|int|1|false|false|
|create_time|date|N/A|false|false|

- 视频模块
>video_cover

| 字段名称 | 类型 | 长度 | Nullable | primarykey |
|---       |---  |---   |---       |---         |
|cover_id|int|11|false|true|
|url|varchar|256|false|false|
|hits|varchar|9|false|false|
|update_time|timestamp|N/A|false|false|

>video

| 字段名称 | 类型 | 长度 | Nullable | primarykey |
|---       |---  |---   |---       |---         |
|video_id|int|11|false|true|
|video_title|varchar|64|false|false|
|video_type|enum|N/A|false|false|
|video_introduction|varchar|256|true|false|
|hits|varchar|9|false|false|
|likes|varchar|9|false|false|
|update_time|datetime|N/A|false|false|

>video_recommend

| 字段名称 | 类型 | 长度 | Nullable | primarykey |
|---       |---  |---   |---       |---         |
|video_id|int|11|false|true|
|recommend_update_time|datetime|N/A|false|false|
|recommend_priority|int|1|false|false|

## 5 运行设计
网页端程序在有输入时启动接收数据模块，通过各模块之间的调用，读入并对输入进行格式化。在接收数据模块的得到充分数据时，将调用网络传输模块，将数据通过网络送到服务器，并等待接收服务器返回的信息。接收到返回信息后随即调用数据输出模块，对信息进行处理，产生相应的输出。服务器端程序的网络数据接口模块必须始终处于活动状态。接收到数据后调用数据处理、查询模块对数据库进行访问，完成后调用网络发送模块，将信息返回网页端。

### 5.1运行模块组合
- 前端模块：
    前台页面：用户访问的网站页面，通常使用HTML、CSS和JavaScript构建。前台页面负责展示视频、搜索功能、用户登录等。
    前端框架：例如Vue、React、Angular等，用于构建前端应用程序。
    前端工程化工具：Webpack、Rollup等，用于打包和优化前端代码。
- 后端模块：
    用户模块：用户注册、登录、权限管理，同时对于视频上传者涉及与视频模块反馈数据的交互。
    视频模块：视频上传、格式转码、存储和处理；视频相关数据如点赞量、播放量等数据的更新与同步。
    交流模块：处理用户发送的实时弹幕消息；视频评论浏览与排序等静态功能以及视频评论回复、更新、删除等动态功能。
    推荐模块：用户收藏夹的增删改查功能；根据收藏视频相关标签推荐的功能。
### 5.2运行控制

### 5.3运行时间
前端框架：前端框架的运行时间通常很短，但在大规模应用中，需要确保框架的性能良好。
前台页面：前台页面的加载时间应该尽量快，以提高用户体验。
视频推荐：根据用户兴趣生成推荐的运行时间应尽量快，满足用户刷新需求。
用户管理：用户注册、登录等操作的运行时间通常很短，但在高并发情况下需要考虑性能。
消息队列：消息队列的处理时间应该相对短，以确保实时消息能够快速传递并避免实时恢复造成的并发问题。
视频弹幕系统：实时弹幕的处理时间相对于直播弹幕对时效性要求较低，但应按时间顺序响应与显示弹幕。
视频上传和处理：视频上传和处理的运行时间取决于视频大小、格式转码的复杂性以及服务器性能，可能需要几秒钟到几分钟不等。
